<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>보스 알리미</title>
    <link rel="stylesheet" href="src/style.css">
</head>
<body>

    <h1>🎙️ 보스 알리미</h1>
    <br>
    
    <button id="startButton">알림 시작</button>

            <p>
                알림을 원하지 않는 보스는 알림 중지 후, 텍스트에서 삭제하고, 다시 알림을 활성화 해주세요.
            </p>
    <h3>필드 보스</h3>
    <div id="nextBossDisplay" class="next-boss-highlight"></div>
    <textarea id="bossListInput">
    <textarea id="bossListInput"></textarea>
    </textarea>
    <br>
    <div class="fixed-alarm-section">
        <div class="fixed-alarm-header">
            <h3>고정 알림</h3>
            <label class="switch">
                <input type="checkbox" id="globalFixedAlarmToggle">
                <span class="slider round"></span>
            </label>
        </div>
        <div id="fixedAlarmList">
            <!-- Fixed alarms will be rendered here by JavaScript -->
        </div>
    </div>
    <br>
    <h3>공유하기</h3>
    <p>공유 링크 생성시 MM.DD 의 날짜 정보(예:11.01)가 반드시 있어야 합니다.</p>
    
    <button id="shareButton">공유 링크 생성 (Short URL)</button>
    
    <div class="input-group">
        <input type="text" id="shareLinkInput" value="목록 수정 후 버튼을 누르세요" readonly>
        <button id="copyButton">복사</button>
    </div>

    <div class="log-header">
        <h3>알림 로그</h3>
        <label class="switch">
            <input type="checkbox" id="logVisibilityToggle">
            <span class="slider round"></span>
        </label>
    </div>
    
    <div id="log-container"></div>

    <script type="module">
        import { initDomElements } from './src/dom-elements.js';

        import { initLogger, log } from './src/logger.js';
        import { BossDataManager, LocalStorageManager } from './src/data-managers.js';

        // DOM 요소들을 한 번만 초기화하여 사용
        const DOM = initDomElements();
        initLogger(DOM.logContainer); // Initialize logger with the log container



        import { speak } from './src/speech.js'; // Import speak function

        import { parseBossList } from './src/boss-parser.js';
        import { startAlarm, stopAlarm, getIsAlarmRunning } from './src/alarm-scheduler.js';
        import { updateBossListTextarea, renderFixedAlarms, updateFixedAlarmVisuals } from './src/ui-renderer.js';
        import { getShortUrl } from './src/api-service.js';
        import { initApp } from './src/event-handlers.js';









        // --- 11. 페이지가 처음 로드될 때 실행되는 함수 ---
        window.addEventListener('load', () => {
            initApp(DOM);
        });

    </script>
    <footer>
        <p>Created by: bohe | v1.0.0</p>
    </footer>
</body>
</html>