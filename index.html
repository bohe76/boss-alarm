<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>보스 알리미</title>
    <link rel="stylesheet" href="src/style.css">
</head>
<body>
    <header>
        <div class="header-container">
            <h1>🎙️ 보스 알리미</h1>
            <button id="alarmToggleButton" class="alarm-toggle-button">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="alarm-icon">
                    <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.93 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"/>
                </svg>
            </button>

        </div>
    </header>

    <div id="full-height-content" class="app-container">
        <nav id="sidebar" class="sidebar">
            <button id="sidebarToggle" class="sidebar-toggle">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="sidebar-toggle-icon">
                    <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                </svg>
            </button>
            <ul class="sidebar-menu">
                <li>
                    <a href="#" id="nav-dashboard" data-screen="dashboard-screen">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="menu-icon">
                            <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                        </svg>
                        <span class="menu-text">대시보드</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="nav-boss-management" data-screen="boss-management-screen">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="menu-icon">
                            <path d="M17 10H7v2h10v-2zm0-4H7v2h10V6zm-7 8H7v2h3v-2zm12-1l-4-4V3H5v6l-4 4v8h22v-8zM6 19H3v-4l1.8-1.8L6 14.2V19zm3-1h6v-4H9v4zm9 1h-3v-4.2l1.2-1.2 1.8 1.8V19z"/>
                        </svg>
                        <span class="menu-text">보스 관리</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="nav-notification-settings" data-screen="notification-settings-screen">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="menu-icon">
                            <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.93 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"/>
                        </svg>
                        <span class="menu-text">알림 설정</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="nav-alarm-log" data-screen="alarm-log-screen">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="menu-icon">
                            <path d="M13 3H6c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-7-5zm1 14H8v-2h6v2zm2-4H8v-2h8v2zm0-4H8V9h8v2zm-1-5V3.5L18.5 9H13z"/>
                        </svg>
                        <span class="menu-text">알림 로그</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="nav-share" data-screen="share-screen">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="menu-icon">
                            <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.52.48 1.2.77 1.96.77 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L7.94 11.02c-.52-.48-1.2-.77-1.96-.77-1.66 0-3 1.34-3 3s1.34 3 3 3c.76 0 1.44-.3 1.96-.77l7.05 4.11c-.05.23-.09.46-.09.7 0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3z"/>
                        </svg>
                        <span class="menu-text">공유</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="nav-help" data-screen="help-screen">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="menu-icon">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/>
                        </svg>
                        <span class="menu-text">도움말</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="nav-version-info" data-screen="version-info-screen">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="menu-icon">
                            <path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
                        </svg>
                        <span class="menu-text">버전 정보</span>
                    </a>
                </li>
            </ul>
        </nav>

        <main id="main-content-area" class="main-content-area">
            <!-- All existing content will be moved here, and then dynamically loaded per screen -->
            <!-- For now, we'll put a placeholder or move existing content here temporarily -->
            <section id="dashboard-screen" class="screen active">
                <h2>대시보드</h2>
                <div id="nextBossDisplay" class="next-boss-highlight"></div>
                <div id="upcomingBossList">
                    <h3>다가오는 보스</h3>
                    <!-- Upcoming boss list will be rendered here by JavaScript -->
                </div>
                <div id="alarmStatusSummary">
                    <h3>알림 상태: <span id="alarmStatusText"></span></h3>
                    <p>다음 알림: <span id="nextAlarmTimeDisplay"></span></p>
                </div>
                <div id="recentAlarmLog">
                    <h3>최근 알림 로그</h3>
                    <!-- Recent alarm log entries will be rendered here by JavaScript -->
                </div>
            </section>

            <section id="boss-management-screen" class="screen">
                <h2>보스 관리</h2>
                <textarea id="bossListInput"></textarea>
            </section>

            <section id="notification-settings-screen" class="screen">
                <h2>알림 설정</h2>
                <div class="fixed-alarm-section">
                    <div class="fixed-alarm-header">
                        <h3>고정 알림</h3>
                        <label class="switch">
                            <input type="checkbox" id="globalFixedAlarmToggle">
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div id="fixedAlarmList">
                        <!-- Fixed alarms will be rendered here by JavaScript -->
                    </div>
                </div>
                <!-- Other notification settings will go here -->
            </section>

            <section id="alarm-log-screen" class="screen">
                <div class="log-header">
                    <h2>알림 로그</h2>
                    <label class="switch">
                        <input type="checkbox" id="logVisibilityToggle">
                        <span class="slider round"></span>
                    </label>
                </div>
                <div id="log-container"></div>
            </section>

            <section id="version-info-screen" class="screen">
                <h2>버전 정보</h2>
                <div id="versionHistoryContent">
                    <!-- Version History content will be loaded here by JavaScript -->
                </div>
            </section>

            <section id="share-screen" class="screen">
                <h2>공유</h2>
                <p>현재 설정된 보스 목록을 다른 사람과 쉽게 공유 할 수 있는 고유 링크를 생성합니다</p>
                <div id="shareMessage"></div>
            </section>

            <section id="help-screen" class="screen">
                <h2>도움말</h2>
                <div id="featureGuideContent">
                    <!-- Feature Guide content will be loaded here -->
                </div>
            </section>

            <!-- The help modal itself will be removed as its content is now part of the help screen -->
        </main>
    </div>

    <script type="module">
        import { initDomElements } from './src/dom-elements.js';

        import { initLogger, log } from './src/logger.js';
        import { BossDataManager, LocalStorageManager } from './src/data-managers.js';

        import { speak } from './src/speech.js'; // Import speak function

        import { parseBossList } from './src/boss-parser.js';
        import { startAlarm, stopAlarm, getIsAlarmRunning } from './src/alarm-scheduler.js';
        import { updateBossListTextarea, renderFixedAlarms, updateFixedAlarmVisuals } from './src/ui-renderer.js';
        import { getShortUrl } from './src/api-service.js';
        import { initApp } from './src/event-handlers.js';

        // --- 11. 페이지가 처음 로드될 때 실행되는 함수 ---
        window.addEventListener('load', () => {
            initApp();
        });
    </script>
    <footer>
        <p>Created by: bohe | v1.3.0</p>
    </footer>
</body>
</html>