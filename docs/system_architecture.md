# 보스 알리미 시스템 아키텍처 문서 (리뉴얼)

## 1. 개요

본 문서는 "보스 알리미" 웹 애플리케이션의 리뉴얼된 시스템 아키텍처를 설명합니다. 기존 단일 화면 구성에서 메뉴 기반의 다중 화면 레이아웃으로 전환하여 사용자 경험을 개선하고 기능별 분리를 강화했습니다. 이 애플리케이션은 게임 보스 출현 시간을 사용자에게 알리고, 보스 목록을 공유할 수 있는 기능을 제공합니다.

## 2. 아키텍처 개요

애플리케이션은 클라이언트 측에서 동작하는 단일 페이지 애플리케이션(SPA) 형태로, HTML, CSS, JavaScript로 구성됩니다. 핵심적으로 **헤더, 내비게이션 메뉴 (사이드바), 메인 콘텐츠 영역, 푸터, 그리고 모바일 뷰를 위한 하단 탭 바**의 5가지 주요 UI 영역으로 나뉘며, JavaScript 코드는 기능별로 여러 모듈로 분리되어 각 모듈은 명확한 책임을 가집니다. 메인 콘텐츠 영역은 선택된 메뉴 항목에 따라 동적으로 다른 화면을 렌더링합니다. 모바일 뷰에서는 기존 사이드바가 '더보기' 메뉴 오버레이로 재활용됩니다.

## 3. 모듈별 상세 설명
애플리케이션을 구성하는 각 모듈의 역할과 주요 기능에 대한 자세한 내용은 [모듈 상세 문서](system_module_details.md)를 참조하십시오.


## 4. 모듈 간 의존성
애플리케이션을 구성하는 모듈 간의 상세한 의존성 관계는 [모듈 의존성 문서](system_module_dependencies.md)를 참조하십시오.


## 5. 데이터 흐름
애플리케이션의 주요 데이터 흐름 및 각 모듈 간의 상호작용에 대한 상세 내용은 [데이터 흐름 문서](system_data_flow.md)를 참조하십시오.

## 6. 결론



리팩토링 v4.0을 통해 "보스 알리미" 애플리케이션은 아키텍처 측면에서 큰 발전을 이루었습니다.



- **관심사 분리 (SoC):** 기존의 비대했던 `event-handlers.js`는 `initApp` 함수를 통해 최상위 오케스트레이터로 역할이 명확해졌습니다. 각 화면의 UI 이벤트와 로직은 `src/screens/*.js` 형태의 독립적인 모듈로 완전히 분리되어, 단일 책임 원칙(Single Responsibility Principle)을 충족하게 되었습니다.







- **결합도 감소 및 안정성 강화:** 모듈 간의 직접적인 함수 호출 대신 **`EventBus`**를 도입하여 발행/구독(Pub/Sub) 패턴으로 전환했습니다. 이로써 화면 모듈들은 서로 또는 `event-handlers.js`의 `initApp` 함수를 직접 알 필요 없이 상호작용할 수 있게 되었고, 이는 코드의 유연성과 확장성을 크게 향상시켰습니다. 또한, `EventBus` 리스너의 초기 등록을 보장하여 애플리케이션 시작 시 발생할 수 있는 레이스 컨디션을 해결하고 시스템 안정성을 강화했습니다.







- **명확한 역할 분담:** `ui-renderer.js`는 최소한의 DOM 조작으로 효율적인 UI를 렌더링하는 역할에 더 집중하게 되었고, `event-handlers.js`의 `initApp` 함수는 애플리케이션의 메인 오케스트레이터로서 전역 이벤트 처리와 화면 전환 관리를 담당하며, `screens` 모듈은 각 화면의 상태와 상호작용을 책임지는 구조가 확립되었습니다. `src/global-event-listeners.js` 모듈을 도입하여 앱 시작 시점에 필요한 모든 전역 EventBus 리스너를 한 곳에서 관리하도록 하여 관심사를 더욱 명확히 분리했습니다.







결론적으로, 이번 리팩토링은 기존의 '갓 객체(God Object)' 문제를 해결하고 순환 종속성의 위험을 제거했습니다. 특히 EventBus 리스너 등록 시점 문제를 해결하여 시스템의 초기화 안정성을 크게 높였습니다. 이를 통해 코드의 가독성, 유지보수성, 테스트 용이성이 크게 개선되었으며, 최종 목표였던 **푸시 알림 기능**과 같은 새로운 기능을 안정적으로 추가할 수 있는 견고한 기반을 성공적으로 마련했습니다.



## 7. 테스트 환경

코드 품질을 보장하고, 회귀를 방지하며, 안정적인 리팩토링 프로세스를 촉진하기 위해 이 프로젝트는 테스트 프레임워크로 **Vitest**를 도입했습니다.

*   **프레임워크:** [Vitest](https://vitest.dev/) - Vite 프로젝트와 호환되는 최신의 빠르고 기능이 풍부한 테스트 프레임워크이지만, ES 모듈을 사용하는 바닐라 JavaScript 프로젝트에서도 훌륭하게 작동합니다.
*   **환경:** [JSDOM](https://github.com/jsdom/jsdom) - 테스트 환경은 Node.js 환경 내에서 가상 DOM 구현을 제공하는 JSDOM을 사용하도록 구성되어 있습니다. 이를 통해 전체 브라우저 인스턴스를 실행할 필요 없이 DOM 조작 및 브라우저와 유사한 동작을 테스트할 수 있습니다.
*   **구성:**
    *   테스트 설정은 `vitest.config.js`에 정의되어 있습니다.
    *   `globals`가 활성화되어(`globals: true`) 일반적인 테스트 함수(`describe`, `it`, `expect`, `vi`)를 명시적인 가져오기 없이 모든 테스트 파일에서 사용할 수 있습니다.
*   **실행:**
    *   테스트는 `package.json`에 정의된 `npm test` 스크립트를 사용하여 실행할 수 있습니다.
    *   이는 애플리케이션의 로직을 검증하고 새로운 변경으로 인한 의도하지 않은 부작용을 방지하는 표준화된 방법을 제공합니다.

## 8. 프로젝트 의존성 관리

프로젝트의 의존성은 Node.js 패키지 매니저인 npm을 통해 관리됩니다. `package-lock.json` 파일은 프로젝트의 모든 직접 및 전이 의존성에 대한 정확한 버전 정보를 기록합니다. 이는 모든 개발 환경에서 일관된 의존성 설치를 보장하고, 의존성 업데이트로 인한 잠재적인 문제를 방지하는 데 필수적입니다.

*   **`package.json`**: 프로젝트의 직접적인 의존성(dependencies)과 개발 의존성(devDependencies)을 명시합니다.
*   **`package-lock.json`**: `npm install` 명령 실행 시 생성/업데이트되며, 모든 패키지의 정확한 버전, 출처, 무결성 정보를 기록합니다. 이 파일은 `git`에 커밋되어 팀 전체의 일관된 개발 환경을 유지하는 데 사용됩니다.
