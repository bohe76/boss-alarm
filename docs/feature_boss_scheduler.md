# 기능 명세: 보스 스케줄러

## 1. 서론
본 문서는 "보스 알리미" 웹 애플리케이션에 통합될 "보스 스케줄러" 기능에 대한 기능 요구사항을 설명합니다. 이 기능은 사용자가 게임별 보스 목록을 선택하고, 각 보스에 대한 남은 시간을 입력하여 보스 출현 시간을 자동으로 계산하고, 이를 "보스 설정" 화면으로 쉽게 전송할 수 있도록 하여 보스 목록 관리 과정을 간소화하는 것을 목표로 합니다.

## 2. 사용자 인터페이스 (UI)
### 2.1. 내비게이션
- 새로운 메뉴 항목 "보스 스케줄러"가 사이드바 내비게이션에 추가됩니다.
- 메뉴 항목은 달력 아이콘과 함께 표시됩니다.

### 2.2. 보스 스케줄러 화면
- "보스 스케줄러" 메뉴 항목이 선택되면 전용 화면이 렌더링됩니다.
- 이 화면에는 다음이 포함됩니다:
    - **게임 선택 드롭다운:** `data/boss_lists.json`에 정의된 상위 키(게임 이름) 목록을 표시합니다.
    - **동적 보스 입력 영역:** 선택된 게임에 따라 해당 게임의 보스 목록이 동적으로 렌더링됩니다. 각 보스에 대해:
        - 보스 이름 (텍스트)
        - "남은 시간" 입력 필드 (`HH:MM` (최대 23:59) 또는 `HH:MM:SS` (최대 23:59:59) 형식)
        - 계산된 "젠 시간" 표시 (예: `HH:MM:SS`)
    - **"남은 시간 모두 삭제" 버튼:** 모든 보스의 "남은 시간" 입력 필드를 초기화합니다.
    - **"보스 설정으로 값 옮기기" 버튼:** 현재 화면에 입력된 유효한 보스들의 계산된 젠 시간을 "보스 설정" 화면의 텍스트 영역으로 전송합니다.

## 3. 기능
### 3.1. JSON 보스 목록 로드 및 관리
- `data/boss_lists.json` 파일에서 게임별 보스 목록 데이터를 로드합니다.
- JSON 구조는 다음과 같습니다:
    ```json
    {
      "Game A": [
        "Boss A1",
        "Boss A2",
        "Boss A3"
      ],
      "Game B": [
        "Boss B1",
        "Boss B2"
      ]
    }
    ```

### 3.2. 게임 선택 및 보스 목록 동적 렌더링
- 게임 선택 드롭다운에서 게임을 선택하면, 해당 게임에 속한 보스 목록이 동적 보스 입력 영역에 렌더링됩니다.
- 각 보스에 대해 보스 이름, "남은 시간" 입력 필드, 계산된 "젠 시간" 표시 영역이 생성됩니다.

### 3.3. 남은 시간 입력 및 젠 시간 계산
- 각 보스의 "남은 시간" 입력 필드는 `HH:MM` 또는 `HH:MM:SS` 형식의 입력을 허용합니다. (최대 23:59:59)
- 입력 필드에 `input` 이벤트 리스너를 사용하여 실시간으로 젠 시간을 계산합니다.
- 계산 로직은 `src/calculator.js`의 `calculateBossAppearanceTime` 함수를 활용합니다.
- 입력이 유효한 형식과 일치하면 계산된 젠 시간(`HH:MM:SS`)이 해당 보스의 표시 영역에 업데이트됩니다.
- 입력이 유효하지 않거나 비어 있으면 표시 영역은 초기 상태(`--:--:--`)를 유지합니다.

### 3.4. "남은 시간 모두 삭제" 버튼
- 클릭 시, 동적 보스 입력 영역에 있는 모든 "남은 시간" 입력 필드의 값을 지우고, 해당 보스들의 "젠 시간" 표시 영역도 초기 상태로 되돌립니다.

### 3.5. "보스 설정으로 값 옮기기" 버튼
- 클릭 시, 다음 로직을 수행합니다:
    1.  **유효한 보스 필터링:** "남은 시간" 입력 필드가 비어 있지 않고 유효한 시간을 포함하는 보스만 선택합니다.
    2.  **젠 시간 계산:** 선택된 각 보스에 대해 현재 시간과 입력된 남은 시간을 합산하여 절대적인 젠 시간(날짜 및 시간)을 계산합니다.
    3.  **시간 순서 정렬:** 계산된 젠 시간을 기준으로 보스 목록을 시간 순서대로 정렬합니다.
    4.  **날짜 처리:**
        -   계산된 젠 시간이 현재 날짜를 기준으로 자정을 넘어가면 다음 날짜로 간주합니다.
        -   "보스 설정" 텍스트 영역으로 전송될 때, 날짜가 변경될 때마다 새로운 `MM.DD` 형식의 날짜 마커 라인을 삽입합니다.
    5.  **"보스 설정" 텍스트 영역 업데이트:** 정렬되고 날짜 마커가 포함된 보스 목록을 "보스 설정" 화면의 `bossListInput` 텍스트 영역에 `MM.DD` (날짜 마커) 및 `HH:MM:SS 보스이름` 형식으로 삽입합니다.

## 4. 기술 세부 사항
### 4.1. 새 모듈: `src/boss-scheduler-data.js`
- `data/boss_lists.json` 파일 로드 및 파싱을 담당합니다.
- 게임 목록 및 해당 보스 목록을 제공하는 함수를 내보냅니다.
- JSON 파일 로드 실패 시 오류 처리 로직을 포함합니다.

### 4.2. 통합
- `index.html`: 새로운 내비게이션 항목 및 화면 컨테이너 (`boss-scheduler-screen`) 추가.
- `src/dom-elements.js`: 새로운 메뉴 항목, 게임 선택 드롭다운, 동적 보스 입력 필드 및 버튼에 대한 DOM 참조 추가.
- `src/ui-renderer.js`: `renderBossSchedulerScreen()` 함수 구현 및 `renderScreen()` 수정. 이 함수는 게임 선택 드롭다운과 동적 보스 입력 영역을 렌더링합니다.
- `src/event-handlers.js`: 새로운 내비게이션 항목, 게임 선택 드롭다운, "남은 시간" 입력 필드(젠 시간 계산 및 화면 업데이트 로직 포함), "남은 시간 모두 삭제" 버튼, "보스 설정으로 값 옮기기" 버튼에 대한 이벤트 리스너 추가. `src/calculator.js` 및 `src/boss-scheduler-data.js`를 활용합니다.
- `src/style.css`: 새로운 UI 요소에 대한 스타일 추가.

## 5. 오류 처리
- "남은 시간" 입력 필드의 유효하지 않은 형식(예: `HH:MM` 또는 `HH:MM:SS` 형식을 벗어나거나, HH가 24 이상인 경우)에 대해 사용자에게 피드백을 제공합니다.
- `data/boss_lists.json` 파일 로드 실패 시 적절한 오류 메시지를 표시합니다.

## 6. 의존성
- `src/boss-scheduler-data.js`는 `data/boss_lists.json`에 의존합니다.
- `src/event-handlers.js`는 `src/calculator.js`, `src/ui-renderer.js`, `src/boss-scheduler-data.js`, `src/dom-elements.js`에 의존합니다.
- `src/ui-renderer.js`는 `src/dom-elements.js`, `src/boss-scheduler-data.js`에 의존합니다.
