# Unreleased Changes

이 파일은 다음 버전 릴리즈에 포함될 변경 사항들을 임시로 기록하는 곳입니다.
릴리즈가 수행되면 이 파일의 내용은 `data/version_history.json`으로 이동되고 초기화됩니다.

## [Unreleased]

### Feat
- **오늘/내일 전체 일정 자동 확장 엔진 (48시간):** 현재 시각 기준이 아닌 '오늘 00:00 ~ 내일 23:59'를 기준으로 보스별 젠 주기에 맞춘 전체 시간표를 자동으로 생성합니다. 이를 통해 날짜별 완전한 보스 일정을 미리 확인하고 계획할 수 있습니다.
- **데이터 세탁기(Sanitization) 안전망:** 로컬 스토리지 로드 시 필수 필드 누락이나 날짜 값이 손상된 데이터(Invalid Date)를 자동으로 탐지하고 정제하여 시스템의 런타임 에러를 방지합니다.
- **PiP(Picture-in-Picture) 위젯 기능 고도화**
  - 5분 이내 출현 예정인 보스 목록을 PiP 창 하단에 실시간으로 표시
  - PiP 창 클릭 시 현재 표시되는 보스 수에 맞춰 창 크기가 자동으로 최적화되는 기능 추가
  - 예정된 보스가 추가되어 레이아웃 동기화가 필요할 때 나타나는 깜빡이는 알림 아이콘 도입
- **텍스트 모드 파싱 엔진 강화**: 
  - 첫 번째 줄에 반드시 날짜(MM.DD)가 포함되도록 강제하여 데이터 기준점을 가시화했습니다.
  - 시간 범위(0~23시, 0~59분) 및 보스 이름 존재 여부에 대한 엄격한 유효성 검사를 추가했습니다.
  - 보스 이름과 비고를 명확히 구분할 수 있는 `#` 구분자 표준을 도입하고, 파싱 시 **표준 UID**를 즉시 부여하도록 고도화했습니다.
- **유일 ID(UID) 기반 인스턴스 개별 관리**: 모든 보스 출현 정보를 독립된 생명력을 가진 객체로 관리하여, 동일 보스라도 시간대별로 고유한 비고(memo)를 유지할 수 있습니다.
- **사용자 의도 보존(User Intent Preservation) 매커니즘**: 사용자가 직접 수정한 데이터는 자동 확장 로직으로부터 보호되어 비고 내용 등이 훼손되지 않는 '전문가 모드' 데이터 정책을 수립했습니다.
- **지능형 UI 동기화(Intelligent Mapping)**: 간편 입력 모드에서 현재 시각 기준 가장 가까운 미래의 보스 인스턴스를 자동으로 추적하여 정확한 비고 및 젠 주기 정보를 실시간으로 노출합니다.
- **커스텀 보스 젠 주기(Zen Interval) 관리 시스템**: 
  - 텍스트 모드(`@젠주기` 구분자)와 간편 모드(`HH:MM` 전용 폼) 모두에서 커스텀 보스의 젠 간격을 직접 제어할 수 있습니다.
  - 시/분 입력을 내부 분 단위 데이터로 자동 환산하고, 다시 UI용 시/분으로 복원하는 양방향 변환 로직을 갖췄습니다.
- **모바일 5-메뉴 하이브리드 네비게이션**: 하단 탭 바에 '보스 스케줄러'를 기본 메뉴로 통합하여 5개 핵심 기능(대시보드, 시간표, 스케줄러, 계산기, 공유)에 대한 엄지손가락 접근성을 완성했습니다.
- **기기별 최적화된 하이브리드 레이아웃**: 
  - **PC**: 비고와 젠 주기를 한 줄로 배치하여 탁 트인 시야를 제공합니다. 스텝퍼(화살표)가 제거된 콤팩트한 숫자 전용 필드를 도입했습니다.
  - **모바일**: 좁은 화면을 고려하여 비고와 젠 주기를 세로로 배치하고, 명시적인 라벨을 추가하여 가독성을 극대화했습니다.
- **지능형 조건부 렌더링**: 프리셋(기본 제공) 보스군에서는 이미 검증된 주기를 사용하므로 입력칸을 자동으로 숨겨 UI 노이즈를 제거하고, 커스텀 보스 선택 시에만 젠 주기 설정폼을 노출합니다.
- **전역 젠 주기 일관성 동기화**: 동일한 보스 이름을 가진 인스턴스들의 젠 주기를 실시간으로 동기화하며, 텍스트 파싱 시 서로 다른 주기가 입력되면 단호하게 오류를 보고하는 전문가급 정합성을 확보했습니다.

### Fixes
- **PC 사이드바 호버 오버레이 UX 고도화 (Issue-023)**:
  - **No Layout Shift 설계**: 사이드바를 고정 레일(Icon Rail) 구조로 변경하여 메뉴 확장 시 본문 영역이 흔들리는 현상을 원천 차단했습니다.
  - **슬라이딩 호버 슬롯**: 햄버거 버튼 클릭 없이 마우스 호버만으로 메뉴가 본문 위로 부드럽게(0.3s) 펼쳐지며, 마우스 이탈 시 즉시 복귀하는 쾌적한 반응성을 구현했습니다.
  - **Stateless 구조 전환**: 불필요한 사이드바 상태 저장 기능을 제거하여 시스템 복잡도를 낮추고 데이터 일관성을 확보했습니다.
- **내보내기 모달 이미지 캡처 및 안정성 런타임 가드 도입 (Issue-022)**:
  - **무결성 캡처 엔진 (DOM ID 보강)**: '표 형태' 내보내기 시 대상 영역의 ID가 누락되던 렌더링 버그를 수정하여 실패 없는 이미지 저장을 보장합니다.
  - **실시간 WYSIWYG 프리뷰**: 내보내기 모달 내 옵션(날짜/내용/스타일) 변경 시 배경의 시간표 UI가 즉시 동기화되어, 사용자가 다운로드 전 최종 결과물을 미리 확인할 수 있습니다.
  - **지능형 배경 리프레시 가드**: 모달이 열려 있는 동안은 자동 새로고침을 일시 정지하여 프리뷰 화면이 깜빡이거나 도중에 메인 설정으로 덮어씌워지는 플리커링 현상을 완벽히 차단했습니다.
  - **스마트 UI 백업 및 원클릭 복원**: 모달을 닫거나 내보내기를 완료하면, 모달 오픈 전의 원래 화면(탭 위치 및 필터 설정)으로 자동 복구하여 사용자 작업 흐름을 보존합니다.
  - **다운로드 연타 방지(Double-Tap Protection)**: 이미지 생성 도중 버튼을 중복 클릭할 수 없도록 즉시 비활성화하고 "이미지 생성중..." 메시지를 노출하는 UX 가드를 적용했습니다.
  - **전문가급 예외 처리**: 클립보드 복사 또는 이미지 캡처 실패 시 상세한 오류 진단 메시지를 제공하고, 시스템 자원을 안전하게 회수합니다.
- **초기 데이터 로딩 우선순위 정교화:** URL 데이터 > 기존 사용자 데이터 > 기본 샘플 데이터 순으로 로딩 로직을 개선하여, 사용자 데이터가 있거나 URL 공유를 받은 경우 샘플 데이터가 덮어씌워지는 문제를 해결했습니다.
- **프리셋 동기화 및 젠 주기 인식 오류 수정:** 보스 프리셋 데이터 로드 시 젠 주기를 잘못 참조하여 일정 확장이 일어나지 않던 버그를 수정했습니다.
- **보스 스케줄러 시간 정밀도 개선:** 간편 입력 모드에서 SSOT의 정밀한 시간(`scheduledDate`)을 직접 출력하도록 개선하여, 대시보드와 스케줄러 간의 시간 차이(Time Drift) 문제를 해결했습니다.
- **남은 시간 역계산 로직 안정화:** 탭 전환 시마다 시간이 깎이던 버그(분 단위 재계산으로 인한 오차)를 수정했습니다. 이제 화면 로딩 시에는 원본 데이터를 그대로 유지하며, 사용자가 직접 입력할 때만 시간이 갱신됩니다.
- **이름 기반 매칭 시스템 도입:** 간편 입력 모드에서 보스 프리셋과 SSOT 데이터를 보스 이름을 기준으로 매칭하도록 변경하여, 데이터 표시 및 동기화의 정확도를 높였습니다. (이름이 중복될 경우 현재 시각과 가장 가까운 항목이 우선 매칭됩니다.)
- **음수 남은 시간 지원:** 이미 시간이 지난 보스에 대해 음수 형식(`-HH:MM`)의 남은 시간 입력을 지원하며, 이를 바탕으로 과거의 정확한 젠 시간을 계산할 수 있도록 보강했습니다.
- **데이터 무결성 및 영속성 강화:** `BossDataManager`(SSOT)의 `localStorage` 연동을 강화하여 새로고침이나 화면 전환 시 데이터 유실을 방지하고, 시간 역전이나 날짜 계산 오류를 차단했습니다.
- **날짜 표기 형식 통일:** 텍스트 모드 출력 시 "오늘" 대신 시스템 표준인 `MM.DD` 형식을 사용하도록 로직을 수정했습니다.
- **초기 로딩 안정화:** `initial-default.json` 로드 시 불필요한 파서 개입을 제거하고 안정적인 객체 매핑 로직으로 복구했습니다.
- **타임테이블 UI 정렬 최적화**: 보스 이름 길이에 따라 가변 너비를 동적으로 계산하여, 이름과 비고가 겹치지 않고 일렬로 깔끔하게 정렬되도록 시각적 품질을 개선했습니다. (타임테이블 화면에서는 `#` 구분자를 제거하여 가독성 증대)
- **비고 입력 유효성 검사 도입**: 간편 모드의 비고 필드에서 `#` 기호 사용을 제한하여 텍스트 모드 데이터 구조와의 충돌을 사전에 차단했습니다.
- **모바일 대시보드 레이아웃 최적화**: iPhone SE, XR 등 초소형 모바일 기기(480px 이하)에서 알림 상태 및 소리 설정 카드가 줄바꿈되지 않고 한 줄로 깔끔하게 표시되도록 가변 너비 레이아웃을 적용했습니다.
- **시스템 용어 체계 정립**: '젠 시간(Appearance Time, 시점)'과 '젠 주기(Zen Interval, 간격)'의 혼용을 바로잡고 UI 및 메시지 전반의 용어를 일원화하여 사용자 혼선을 차단했습니다.
- **비고(Memo) 입력 정책 개선**: 최대 입력 글자 수를 **25자**로 상향 조정하고, 이에 맞는 사용자 친화적인 플레이스홀더를 적용했습니다.
- **유효성 검사 UX 최적화**: 입력 도중 방해받지 않도록 실시간 검사 대신 '보스 시간 업데이트' 버튼 클릭 시 최종적으로 논리적 정합성을 검증하도록 시점을 조정했습니다.
- **입력 폼 클린업**: 젠 주기 값이 0일 경우 입력창을 비워 플레이스홀더(0:00)가 보이게 함으로써 시각적 정돈감을 높이고 입력 편의성을 개선했습니다.

### Chore
- **로컬 스토리지 관리 구조 리팩토링 (Issue-021):** `BossDataManager`와 `LocalStorageManager`를 분리하고 파편화된 저장 키 관리를 중앙화하기 위한 구조적 개선 작업입니다. 사용자의 명시적인 지시가 있을 때 진행할 예정입니다.