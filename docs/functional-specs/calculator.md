# 보탐 계산기 (Calculator)

**1. 개요**
'보탐 계산기' 화면은 "젠 계산기"와 "광 계산기" 두 가지 주요 기능을 제공하여, 사용자가 보스 리젠 시간 및 '광' 타이밍을 계산하고 관리할 수 있도록 합니다. 이 화면은 하나의 탭(탭 전환 없음)으로 구성되어 두 계산기를 동시에 표시하며, 사용자 편의를 위한 기록 저장 및 관리 기능도 포함합니다.

**2. 기능 접근**
*   사용자는 좌측 사이드바 메뉴 또는 모바일 환경의 '더보기' 메뉴에서 '계산기' 메뉴 항목을 클릭하여 '보탐 계산기' 화면으로 이동합니다.

**3. 젠 계산기 (Zen Calculator)**
*   **목적:** 보스의 남은 시간을 입력하여 정확한 출현 시간을 계산하고, 필요에 따라 현재 보스 목록의 젠 시간을 업데이트하는 기능.
*   **남은 시간 입력:**
    *   텍스트 입력 필드(`remainingTimeInput`)에 보스 리젠까지 남은 시간을 입력합니다.
    *   **입력 형식:** 다음 형식을 지원합니다.
        *   표준 시계 시간: `HH:MM:SS`, `HH:MM`
        *   숫자 형식 (표준 시계 시간): `HHMM` (예: `1305`는 13시 05분), `HHMMSS` (예: `130530`은 13시 05분 30초), `HMM` (예: `315`는 3시 15분)
*   **젠 시간 표시:** 입력된 남은 시간을 바탕으로 계산된 보스 출현 시간(젠 시간)이 `HH:MM:SS` 형식으로 `bossAppearanceTimeDisplay` 영역에 자동으로 표시됩니다.
*   **보스 목록 업데이트:**
    *   **보스 선택 드롭다운:** 현재 `BossDataManager`에 등록된 보스 목록 중 현재 시간보다 미래에 예정된 보스들이 드롭다운(`bossSelectionDropdown`)에 표시됩니다.
    *   **업데이트 버튼:** 드롭다운에서 보스를 선택하고 '보스 시간 업데이트' 버튼(`updateBossTimeButton`)을 클릭하면, 젠 계산기에 의해 계산된 출현 시간으로 해당 보스의 젠 시간이 업데이트됩니다.
    *   **유효성 검사:** 남은 시간 입력이 유효하지 않거나 드롭다운에서 보스를 선택하지 않으면 업데이트 버튼은 비활성화됩니다.
    *   **데이터 반영:** 보스 시간 업데이트 시 `BossDataManager`를 통해 전체 보스 목록이 재구성(Reconstruction)되어 반영됩니다.

**4. 광 계산기 (Light Calculator)**
*   **목적:** '광'이 출현하는 보스의 타이밍을 측정하고, 광/잡힘 시간을 기록하며, 예상 잡힘 시간을 계산하는 기능.
*   **스톱워치 기능:**
    *   **'시작' 버튼 (`lightStartButton`):**
        *   **초기 상태:** 계산기 화면 진입 시 '시작' 버튼은 **활성화**되어 있습니다.
        *   **'시작' 클릭 시:** 스톱워치를 시작하고 `경과 시간`(`lightStopwatchDisplay`)이 00:00부터 1초 단위로 증가합니다. '시작' 버튼은 **즉시 비활성화**됩니다. '광' 및 '잡힘' 버튼이 **활성화**됩니다.
        *   **스톱워치 정지:** '시작' 버튼 자체로는 스톱워치를 정지시킬 수 없습니다. 스톱워치를 정지하려면 '잡힘' 버튼을 클릭하여 전체 계산 과정을 완료해야 합니다.
        *   **스톱워치 재개:** '잡힘' 버튼을 클릭하여 계산기를 초기화한 후, 다시 '시작' 버튼을 누르면 스톱워치가 00:00부터 시작됩니다. (코드 상에는 이전에 멈췄던 시간부터 재개하는 로직이 있으나, '시작' 버튼이 비활성화되므로 사용자는 이 기능을 직접 트리거할 수 없습니다.)
    *   **경과 시간 표시:** `MM:SS` 형식으로 현재까지의 경과 시간을 표시합니다.
*   **'광' 버튼 (`lightGwangButton`):**
    *   스톱워치 실행 중에 '광' 버튼을 클릭하면, 해당 시점의 경과 시간을 '광 시간'으로 기록합니다. (이미 '광'이 기록된 경우, 다시 눌러도 동작하지 않습니다.)
    *   동시에 기록된 '광 시간'을 기준으로, 총 보스 출현 시간의 70%가 '광 시간'이었다고 가정하여 남은 30%에 해당하는 '예상 시간'이 계산되어 `lightExpectedTimeDisplay`에 `MM:SS` 형식으로 카운트다운됩니다.
    *   '예상 시간'이 00:00이 되면, '오버 시간'으로 전환되어 1초 단위로 시간이 증가하며 `lightExpectedTimeDisplay`에 표시되고, 시각적으로 '오버 시간'임을 나타내는 변화가 적용됩니다.
*   **'잡힘' 버튼 (`lightCaptureButton`):**
    *   '잡힘' 버튼 클릭 시, **사용자에게 기록할 '보스 이름'을 입력하라는 프롬프트 창이 표시됩니다.**
    *   사용자가 프롬프트 창에 보스 이름을 입력하고 '확인'을 누르면 (또는 입력 없이 '확인'을 누르면), 현재 스톱워치 경과 시간과 기록된 '광 시간', 그리고 예상/오버 시간을 바탕으로 계산된 정보가 '광 계산 목록'에 기록됩니다.
    *   만약 사용자가 프롬프트 창을 '취소'하면 기록은 저장되지 않고 로그에 취소 메시지가 남습니다.
    *   기록 후에는 '광 계산기'의 모든 상태가 초기화됩니다 (스톱워치 정지, 표시 시간 초기화 등).
*   **최근 계산 결과 표시:** "잡힘" 버튼을 눌러 계산된 직후의 '광', '잡힘', '총 시간' 정보가 임시로 `lightTempResults` 영역에 표시됩니다.
*   **기록 저장 및 불러오기:**
    *   '잡힘' 버튼을 통해 기록된 '광 계산 목록'은 브라우저의 로컬 스토리지에 영구적으로 저장됩니다.
    *   '보탐 계산기' 화면으로 이동 시 저장된 기록이 자동으로 로드되어 '광 계산 목록' 섹션(`lightSavedList`)에 표시됩니다.
    *   '목록 초기화' 버튼(`clearLightRecordsButton`) 클릭 시 저장된 모든 기록을 삭제합니다.
*   **데이터 초기화:** '보탐 계산기' 화면으로 이동 시 '광 계산기'의 모든 상태(스톱워치, 표시 시간 등)가 초기화됩니다.