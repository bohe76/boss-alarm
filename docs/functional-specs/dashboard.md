# 대시보드 (Dashboard)

**1. 개요**
'대시보드' 화면은 애플리케이션의 핵심 정보와 현재 상태를 한눈에 파악할 수 있도록 제공하는 메인 화면입니다. 다음 보스 출현 시간, 다가오는 보스 목록, 알림 시스템의 실행 상태 및 소리 설정, 그리고 최근 알림 로그를 실시간으로 표시합니다.

**2. 다음 보스 정보 표시**
*   **표시 위치:** 화면 상단, '다음 보스' 섹션.
*   **정보 내용:** 가장 가까운 다음 보스의 이름, 출현 시간(`[HH:MM:SS]`) 및 남은 시간(`(HH:MM:SS)`)을 표시합니다.
*   **갱신 주기:** 1초마다 실시간으로 갱신되며, `BossDataManager`의 데이터(다음 보스 정보)가 변경될 때도 즉시 갱신됩니다.
*   **시각적 강조 (남은 시간):** 남은 시간에 따라 시간의 색상이 동적으로 변경되어 직관성을 높입니다.
    *   **5분 미만:** 빨간색
    *   **10분 미만:** 주황색
    *   **1시간 미만:** 검은색
    *   **1시간 이상:** 회색
*   **보스 없음:** 예정된 다음 보스가 없을 경우 "다음 보스 없음" 메시지를 표시합니다.

**3. PiP 위젯 (Picture-in-Picture Widget)**
*   **기능:** 대시보드의 '다음 보스' 정보(보스 이름, 남은 시간)를 브라우저 창 밖에 작은 미니 위젯으로 띄울 수 있는 버튼을 제공합니다.
*   **표시 위치:** '다음 보스' 정보 카드 우측 상단.
*   **작동 방식:**
    *   버튼 클릭 시 PiP 창이 열리며, '다음 보스'의 이름과 남은 시간이 표시됩니다.
    *   PiP 창은 브라우저 창 밖에 항상 떠 있으므로, 다른 작업을 하면서도 보스 정보를 실시간으로 확인하고 추적할 수 있습니다.
    *   PiP 창의 닫기 버튼(X)을 누르거나, 메인 대시보드의 PiP 아이콘 버튼을 다시 누르면 닫힙니다.
*   **지원 환경:** Document Picture-in-Picture API를 지원하는 최신 브라우저(Chrome, Edge 등)에서만 동작합니다.
*   **정보 내용:** 사용자의 선택에 따라 '다음 보스' 뿐만 아니라 '다가오는 보스 목록'까지 확장된 정보를 제공합니다.
    *   **3단 데이터 레이아웃:** 각 줄마다 `[출현 시각] [보스 이름] [남은 시간]` 순서로 정렬되어 정보 습득 효율을 극대화합니다.
    *   **헤더:** 가장 임박한 메인 보스는 상단에 큰 폰트로 강조됩니다.
    *   **리스트:** 그 외의 다가오는 보스들은 하단에 리스트 형태로 나열됩니다.
*   **위젯 크기 (DOM 실측 기반 리사이징):**
    *   너비는 240px로 고정됩니다.
    *   **높이:** 표시할 보스의 수에 따라 창 높이가 1px 단위로 정밀하게 자동 조절됩니다 (`adjustWindowHeight`). 콘텐츠가 렌더링된 직후 DOM 요소의 실제 높이(`offsetHeight`)를 측정하여 반영하므로, OS별 폰트 렌더링 차이나 시스템 배율과 관계없이 항상 최적의 크기를 유지합니다. (매직 넘버 제거 및 완전 반응형 높이 구현)
*   **시각적 강조:**
    *   **남은 시간:** 메인 대시보드와 동일하게 4단계(빨강, 주황, 검정, 회색) 동적 색상을 지원합니다. 1시간 이상 남은 보스는 폰트 두께가 얇게(`font-weight: normal`) 처리되어 가독성을 조절합니다.
    *   **Bell-Alert 아이콘:** 다음 보스가 5분 미만으로 임박하면 우측 상단에 붉은색 종 아이콘이 나타나며 깜빡여 시각적 경보를 제공합니다.

**4. 다가오는 보스 목록 표시**
*   **표시 위치:** 화면 중앙, '다가오는 보스' 섹션.
*   **정보 내용:** 다음 보스를 제외한, 현재 시간 이후에 출현할 예정인 최대 10개의 보스 목록을 표시합니다. 각 보스에 대해 출현 시간(`[HH:MM:SS]`), 보스 이름, 남은 시간(`(HH:MM:SS)`)이 표시됩니다.
*   **데이터 출처:** 동적 보스 목록과 활성화된 고정 알림 목록을 통합하여 시간 순으로 정렬한 데이터(`BossDataManager.getUpcomingBosses()`)를 사용합니다.
*   **시각적 강조:** 각 보스의 남은 시간에 따라 목록의 색상이 동적으로 변경됩니다.
    *   **5분 미만:** 보스 이름(파란색), 남은 시간(빨간색)
    *   **10분 미만:** 보스 이름(파란색), 남은 시간(주황색)
    *   **1시간 미만:** 보스 이름(검은색), 남은 시간(검은색)
    *   **1시간 이상:** 모든 정보가 회색으로 표시됩니다.
*   **갱신 주기:** 1초마다 실시간으로 갱신되며, `BossDataManager`의 데이터(보스 스케줄)가 변경될 때도 즉시 갱신됩니다.
*   **목록 없음:** 예정된 보스가 없을 경우 "예정된 보스가 없습니다." 메시지를 표시합니다.

**5. 알림 실행 상태 및 소리 설정**
*   **알림 상태 표시:**
    *   **표시 위치:** 화면 우측 상단 '알림 상태' 카드.
    *   **정보 내용:** 알림 시스템이 현재 '알림 실행 중'인지 '알림 중지됨'인지를 텍스트로 표시하며, 이에 따라 텍스트의 색상이 변경됩니다.
    *   **갱신:** '알람 토글 버튼' 클릭 또는 애플리케이션 초기 로딩 시 `LocalStorageManager`에 저장된 상태에 따라 즉시 갱신됩니다.
*   **소리 설정 (음소거) 제어:**
    *   **표시 위치:** 화면 우측 상단 '소리 설정' 카드.
    *   **제어 방식:** '음소거 토글 버튼'(`muteToggleButton`) 클릭 시 음성 알림의 활성화/비활성화 상태를 토글합니다.
    *   **시각적 피드백:** 버튼의 아이콘이 음소거 상태에 따라 변경됩니다. (스피커 모양 / X자 스피커 모양)
    *   **갱신:** 버튼 클릭 또는 애플리케이션 초기 로딩 시 `LocalStorageManager`에 저장된 상태에 따라 즉시 갱신됩니다.

**6. 최근 알림 로그 표시**
*   **표시 위치:** 화면 우측 하단 '로그' 카드.
*   **정보 내용:** 가장 최근에 발생한 3개의 알림 또는 시스템 메시지를 표시합니다.
*   **갱신 주기:** `EventBus`를 통해 `log-updated` 이벤트가 발생할 때마다 즉시 갱신됩니다. (즉, `log()` 함수가 호출될 때마다).
*   **로그 없음:** 최근 알림 기록이 없을 경우 "최근 알림 기록 없음" 메시지를 표시합니다.
*   **시각적 강조:** `logger.js`에서 `isImportant: true`로 기록된 로그는 시각적으로 강조되어 표시됩니다.

**7. 대시보드 화면 갱신 관리**
*   '대시보드' 화면이 활성화된 경우에만 1초마다 모든 대시보드 콘텐츠(다음 보스, 다가오는 보스 목록, 알림 상태)가 자동으로 갱신됩니다.
*   '대시보드' 화면에서 다른 화면으로 전환하면 1초 주기 갱신은 자동으로 중지됩니다.