# 보스 알리미 시스템 아키텍처 문서 (v2.0 - 리팩토링 후)

## 1. 개요

본 문서는 "보스 알리미" 웹 애플리케이션의 리뉴얼된 시스템 아키텍처를 설명합니다. 이 애플리케이션은 게임 보스 출현 시간을 사용자에게 알리고, 보스 목록을 공유할 수 있는 클라이언트 측 웹 애플리케이션입니다. 기존 단일 화면 구성에서 메뉴 기반의 다중 화면 레이아웃으로 전환하여 사용자 경험을 개선하고 기능별 분리를 강화했습니다.

## 2. 아키텍처 개요

애플리케이션은 `src/app.js`를 최초 진입점으로 하는 클라이언트 측 단일 페이지 애플리케이션(SPA)입니다. HTML5, CSS3, 바닐라 JavaScript (ES Modules), 웹 음성 API (`window.speechSynthesis`), TinyURL API 등의 기술 스택으로 구성됩니다.

UI는 핵심적으로 **헤더, 내비게이션 메뉴 (사이드바), 메인 콘텐츠 영역, 푸터, 그리고 모바일 뷰를 위한 하단 탭 바**의 5가지 주요 영역으로 나뉘며, JavaScript 코드는 기능별로 `src/` 폴더 내의 여러 ES Modules로 분리되어 각 모듈은 명확한 책임을 가집니다. `src/app.js`는 애플리케이션의 전반적인 초기화, 상태 관리 및 라우팅을 담당하는 최상위 오케스트레이터 역할을 수행합니다. 메인 콘텐츠 영역은 `src/router.js`와 `src/ui-renderer.js`를 통해 선택된 메뉴 항목에 따라 다른 화면을 동적으로 렌더링합니다. 모바일 뷰에서는 기존 사이드바가 '더보기' 메뉴 오버레이로 재활용됩니다.

## 3. 주요 기능

*   **보스 목록 관리:** 사용자는 텍스트 영역에 `HH:MM 보스이름` 형식으로 보스 출현 시간과 이름을 입력하고 수정할 수 있습니다. 사용자 지정 보스 목록을 추가, 수정, 삭제할 수 있는 기능도 제공합니다.
*   **시간 기반 알림:** 보스 출현 5분 전, 1분 전, 0분 전에 오디오 및 시각적(로그) 알림이 트리거됩니다.
*   **오디오 알림:** 웹 음성 API (`window.speechSynthesis`)를 활용하여 음성 알림을 제공합니다. 음소거 설정이 가능합니다.
*   **로깅:** 트리거된 모든 알림 및 시스템 메시지 로그를 표시합니다.
*   **공유 가능한 URL:** 현재 보스 목록을 인코딩하여 다른 사용자를 위해 미리 채워주는 짧은 URL(TinyURL API를 통해)을 생성합니다.
*   **젠/광 계산기:** 보스 리젠 시간을 계산하는 유틸리티 기능을 제공합니다.

## 4. 기술 스택 상세

*   **HTML5 / CSS3:** 웹 표준 마크업 및 스타일링. CSS는 `src/style.css` 외부 파일로 링크됩니다.
*   **바닐라 JavaScript (ES Modules):** 프레임워크 없이 순수 JavaScript를 사용하여 모듈화된 형태로 개발되었습니다. `src/` 폴더 내에서 기능별로 분리된 모듈들을 `import`하여 사용합니다.
*   **Web Speech API (`window.speechSynthesis`):** 음성 알림 기능을 구현하는 데 사용됩니다.
*   **TinyURL API:** 공유 가능한 짧은 URL을 생성하는 데 사용됩니다.
*   **비동기 처리:** `fetch` API 및 `async/await` 문법을 활용하여 TinyURL API 호출, JSON 파일 로드, 클립보드 작업 등 비동기 작업을 효율적으로 처리합니다.
*   **Local Storage:** `LocalStorageManager`를 통해 사용자 설정(고정 알림, 음소거 상태, 사이드바 확장 상태 등) 및 사용자 지정 데이터(광 계산기 기록 등)를 브라우저에 영구적으로 저장합니다.

## 5. 애플리케이션 빌드 및 실행

이 프로젝트는 클라이언트 측 웹 애플리케이션으로, HTML, CSS, JavaScript 모듈로 구성됩니다. 특별한 빌드 단계나 서버 측 구성 요소는 필요하지 않습니다.

**애플리케이션 실행 방법:**
1.  `index.html` 파일을 최신 웹 브라우저(예: Chrome, Firefox, Edge)에서 엽니다.
2.  **참고:** `file://` 프로토콜로 `index.html`을 직접 열 경우, 일부 브라우저에서 보안상의 이유로 `fetch` 요청(예: TinyURL API 호출, 도움말 문서 로드)이 CORS 오류로 실패할 수 있습니다. 모든 기능을 정상적으로 사용하려면, 로컬 웹 서버(예: VS Code Live Server 확장)를 사용하여 애플리케이션을 실행하는 것을 권장합니다.

## 6. 개발 원칙 및 코드 품질

프로젝트의 코드 품질을 높이고 유지보수성을 확보하기 위해 다음과 같은 개발 원칙 및 도구를 사용합니다.

*   **TDD (Test-Driven Development):** `Vitest` 및 `JSDOM` 환경을 사용하여 테스트 코드를 먼저 작성하고, 이를 기반으로 기능을 구현하며 리팩토링을 진행합니다.
*   **SOLID 원칙:** 모듈 및 클래스 설계 시 단일 책임, 개방-폐쇄, 리스코프 치환, 인터페이스 분리, 의존성 역전 원칙을 준수합니다.
*   **Clean Architecture:** 계층 간의 명확한 의존성 방향을 준수하여 도메인 로직이 외부 기술 스택에 의존하지 않도록 설계합니다.
*   **예외 처리 및 안정성 설계:**
    *   **방어적 프로그래밍:** 외부 입력, API 응답, DB 결과 등 예측 불가능한 상황에 대비하여 견고하게 코드를 작성합니다.
    *   **Fail-Fast:** 시스템 상태 이상이나 인증 실패 등 치명적인 오류는 즉시 감지하고 중단합니다.
    *   **사전 조건 검증:** 함수나 API 호출 전에 필수 파라미터 및 상태값을 확인합니다.
    *   **멱등성(Idempotency):** API는 동일한 요청이 반복되더라도 시스템 상태가 변하지 않도록 설계합니다.
    *   **우아한 실패 처리(Graceful Degradation):** 일부 기능 실패 시에도 핵심 기능이 유지되도록 설계합니다.
*   **DRY (Don’t Repeat Yourself):** 중복된 로직을 최소화하고, 재사용 가능한 구조로 작성합니다.
*   **KISS (Keep It Simple, Stupid):** 코드는 단순하고 명확하게 작성하여 가독성과 유지보수성을 높입니다.
*   **ESLint:** 정적 코드 분석 도구를 사용하여 코드의 문법 오류, 잠재적인 버그, 스타일 규칙 위반 등을 코드를 실행하기 전에 찾아내고 수정합니다.

## 7. Git 커밋 및 버전 관리

프로젝트의 변경 사항 추적 및 관리를 위해 명확한 Git 커밋 원칙과 버전 관리 절차를 준수합니다.

*   **Git 커밋 원칙:**
    *   커밋 메시지는 제목과 본문을 포함하여 한글로 작성합니다. (`feat`, `fix`, `docs`, `refactor`, `chore` 등 명확한 유형을 사용)
    *   복잡하거나 여러 줄로 구성된 커밋 메시지 작성 시 임시 파일을 활용하여 안정적으로 관리합니다.
*   **버전 관리:**
    *   버전은 `vX.X.X` 형식을 따르며, 버전 업데이트 시 `index.html`의 CSS 링크 버전, `window.APP_VERSION` 변수, `docs/version_history.json` 파일을 함께 업데이트합니다.
*   **릴리즈 노트 작성:**
    *   `docs/version_history.json` 파일에 사용자 관점에서 작성하며, 추가된 기능과 기능 설명에 집중합니다.

## 8. 모듈별 상세 설명
애플리케이션을 구성하는 각 모듈의 역할과 주요 기능에 대한 자세한 내용은 [모듈 상세 문서](system_module_details_v2.md)를 참조하십시오.

## 9. 모듈 간 의존성
애플리케이션을 구성하는 모듈 간의 상세한 의존성 관계는 [모듈 의존성 문서](system_module_dependencies_v2.md)를 참조하십시오.

## 10. 데이터 흐름
애플리케이션의 주요 데이터 흐름 및 각 모듈 간의 상호작용에 대한 상세 내용은 [데이터 흐름 문서](system_data_flow_v2.md)를 참조하십시오.