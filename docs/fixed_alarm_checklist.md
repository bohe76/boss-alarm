### **고정 알림 요일별 반복 기능 구현 체크리스트 (사전 분석 기반 실행 계획)**

#### **1.0 개요 및 전략**

이 문서는 고정 알림(Fixed Alarm)에 **요일별 반복 설정** 기능을 추가하기 위한 실행 계획입니다.

*   **목표:** 사용자가 특정 요일에만 알림이 울리도록 설정할 수 있게 함 (예: "매주 월, 수, 금 21:00 보스").
*   **핵심 전략:** UI 우선 구현 후 데이터 및 로직 연결.
*   **요일 기준:** 일요일(0) ~ 토요일(6) 순서.

---

### **0단계: UI/UX 개선 (우선순위 최상)**

<details>
<summary><strong>0.1. 요일 선택 UI 컴포넌트 구현</strong></summary>

- [ ] **사전 분석:** 고정 알림 추가 카드에 요일 선택 버튼 그룹이 필요합니다.
- [ ] **실행 계획:**
    *   `src/ui-renderer.js`: `renderFixedAlarms` 함수 내 '추가' 섹션에 요일 선택 버튼 컨테이너 추가.
    *   **버튼 구성:** 일, 월, 화, 수, 목, 금, 토 (총 7개). 기본적으로 모두 선택된 상태(`active`)로 렌더링.
    *   `src/styles/style.css`: 요일 버튼 스타일링.
        *   기본: 회색 배경, 검은 글씨.
        *   선택됨(`active`): 주요 색상(보라색/파란색 등) 배경, 흰 글씨.
        *   크기: 터치하기 편한 적절한 크기의 원형 또는 사각형.
- [ ] **검증:** 알림 설정 화면에 '일 월 화 수 목 금 토' 버튼이 예쁘게 배치되었는지 확인.
</details>

<details>
<summary><strong>0.2. 고정 알림 목록 표시 개선</strong></summary>

- [ ] **사전 분석:** 목록에 있는 각 알림 아이템에도 해당 알림의 요일 정보가 텍스트로 표시되어야 합니다.
- [ ] **실행 계획:**
    *   `src/ui-renderer.js`: 알림 아이템 렌더링 시 `days` 데이터를 문자열로 변환하여 표시.
    *   **표시 규칙:**
        *   모든 요일 선택 시: "매일"
        *   평일(월~금): "평일"
        *   주말(토,일): "주말"
        *   그 외: "월, 수, 금" 처럼 요일 나열.
- [ ] **검증:** 목록 UI가 깨지지 않고 요일 정보가 잘 보이는지 확인.
</details>

<details>
<summary><strong>0.3. 편집 UI 개선 (모달 도입)</strong></summary>

- [ ] **사전 분석:** 기존 `prompt` 방식으로는 시간, 이름, 요일을 한 번에 수정하기 어렵습니다. 커스텀 모달이 필요합니다.
- [ ] **실행 계획:**
    *   `index.html` 또는 `ui-renderer.js`: '고정 알림 편집 모달' HTML 구조 추가. (시간 입력, 이름 입력, 요일 선택 버튼 포함)
    *   `src/styles/style.css`: 모달 스타일링.
- [ ] **검증:** '편집' 버튼 클릭 시 모달이 뜨는지 확인 (아직 기능 연결 전).
</details>

---

### **1단계: 데이터 구조 및 마이그레이션**

<details>
<summary><strong>1.1. LocalStorageManager 데이터 마이그레이션</strong></summary>

- [ ] **사전 분석:** 기존 데이터에 `days` 속성이 없으므로 기본값 주입이 필요합니다.
- [ ] **실행 계획:**
    *   `src/data-managers.js`의 `loadFixedAlarms` 함수 수정.
    *   로드된 데이터에 `days`가 없으면 `[0, 1, 2, 3, 4, 5, 6]` (일~토) 할당.
- [ ] **검증:** 앱 실행 후 데이터 구조 확인.
</details>

---

### **2단계: 로직 연결 (UI <-> Data)**

<details>
<summary><strong>2.1. 요일 버튼 상호작용 및 저장 구현</strong></summary>

- [ ] **사전 분석:** 버튼 클릭 시 `active` 클래스 토글 및 데이터 수집 로직이 필요합니다.
- [ ] **실행 계획:**
    *   `src/ui-renderer.js`: 요일 버튼 클릭 이벤트 핸들러 (CSS 클래스 토글).
    *   `addFixedAlarmButton` 클릭 핸들러: 선택된 요일(`active` 클래스 있는 버튼들)의 인덱스를 수집하여 `days` 배열로 저장.
    *   편집 모달 저장 로직 구현.
- [ ] **검증:** 알림 추가/수정 후 새로고침해도 요일 설정이 유지되는지 확인.
</details>

---

### **3단계: 스케줄링 로직 고도화**

<details>
<summary><strong>3.1. 요일을 고려한 다음 알림 시간 계산</strong></summary>

- [ ] **사전 분석:** `alarm-scheduler.js`에서 워커로 데이터를 보낼 때, 요일을 고려하여 미래 시간을 계산해야 합니다.
- [ ] **실행 계획:**
    *   `src/alarm-scheduler.js`: `calculateNextTargetTime(time, days)` 헬퍼 함수 구현.
    *   오늘이 포함되면 오늘 시간(미래인 경우), 아니면 가장 가까운 미래 요일의 시간으로 계산.
- [ ] **검증:** 요일별 알림이 정확한 날짜/시간으로 대시보드에 표시되는지, 워커가 제때 알림을 보내는지 확인.
</details>

---

### **4단계: 통합 테스트**

<details>
<summary><strong>4.1. 시나리오 테스트</strong></summary>

- [ ] **검증:**
    1.  특정 요일(예: 내일)만 선택한 고정 알림 추가.
    2.  대시보드 '다음 보스'에 해당 알림이 올바른 날짜/시간으로 표시되는지 확인.
    3.  알림이 해당 요일에만 울리는지 확인.
</details>