---
status: 미해결
created_at: 2025-11-26
priority: high
assigned_to: Gemini
labels:
  - bug
  - logic
  - boss-scheduler
---
# 이슈 007: 다음 보스 계산 로직 날짜 구분 오류

## 1. 문제점

대시보드 및 보스 스케줄러에서 '다음 보스'를 계산할 때, 보스의 출현 날짜를 정확하게 고려하지 않고 시간만으로 비교하여 잘못된 보스를 표시하는 문제가 발견되었습니다.

### 재현 시나리오 (예시)
- **현재 날짜:** 11월 26일
- **보스 목록:**
  1. `11.26 11:00 보스A` (오늘 오전 11시)
  2. `11.27 05:33 보스B` (내일 새벽 5시 33분)
- **기대 결과:** 현재 시간이 11월 26일 10:00라면, 다음 보스는 '보스A'여야 합니다.
- **실제 결과:** '보스B' (05:33)가 '보스A' (11:00)보다 시간 수치가 작기 때문에 더 이른 보스로 잘못 인식되어 '다음 보스'로 표시됩니다.

## 2. 원인 추정

- 보스 데이터를 정렬하거나 비교하는 로직에서 `Date` 객체의 전체 타임스탬프가 아닌, 시간(`HH:MM`) 문자열만 비교하고 있을 가능성이 높습니다.
- 또는 날짜 변경선(자정)을 넘가는 계산 로직에 오류가 있을 수 있습니다.

## 3. 향후 계획

1.  **리팩토링 완료 대기:** 현재 진행 중인 아키텍처 리팩토링(v4.0)을 우선 완료하여 코드 베이스를 안정화합니다.
2.  **로직 분석 및 수정:** `BossDataManager` 및 `alarm-scheduler.js`의 다음 보스 계산 로직을 정밀 분석합니다. 날짜와 시간을 결합한 `Date` 객체 또는 타임스탬프를 기준으로 정렬하도록 수정합니다.
3.  **테스트:** 날짜가 다른 여러 보스가 섞여 있는 상황에 대한 테스트 케이스를 추가하여 검증합니다.
