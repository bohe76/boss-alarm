---
id: issue-019
title: "보스 스케줄러 간편 입력 모드 정상 동작 하지 않음"
status: "해결됨"
priority: "High"
assignee: "Antigravity"
labels:
  - bug
  - scheduler
  - input-mode
created_date: "2025-12-29"
resolved_date: "2025-12-29"
---

# Issue-019: 보스 스케줄러 간편 입력 모드 정상 동작 하지 않음

## 1. 개요 (Overview)
* 보스 스케줄러의 **간편 입력 모드**에서 데이터가 사라지거나 확장이 일어나지 않는 등의 전반적인 문제 해결.

## 2. 문제점 또는 요구사항 (Problem or Requirement)
* 간편 입력 모드에서 보스 입력 폼이 Draft 데이터와 올바르게 동기화되지 않는 문제.
* 젠 주기가 있는 보스들이 미래 일정으로 자동 확장되지 않는 문제.
* 초기 로딩 시 오늘이 아닌 어제 날짜가 리스트에 섞여 나오는 문제.

## 3. 해결 방안 (Proposed Solution)
* `BossDataManager`를 SSOT(Single Source of Truth) 기반으로 전면 개편.
* 모든 데이터 진입점(URL, 로컬 스토리지, 샘플 데이터)을 통합하고 확장 로직을 강제 적용.

## 4. 해결 과정 및 최종 결과
1. **젠 주기 인식 버그 수정**: `_getInternalBossInterval`에서 보스 젠 주기(720분 등)를 `0`으로 잘못 인식하던 참조 오류를 수정하여 자동 스케줄 확장이 가능하도록 함.
2. **48시간 일정 자동 확장 엔진 도입**: 현재 시점에서 24시간을 계산하는 방식 대신, '오늘 00:00 ~ 내일 23:59'까지 총 48시간의 고정 일정을 생성하는 `_expandAndReconstruct` 로직을 구현함. 이로 인해 리스트 최상단에 어제 날짜가 노출되는 문제를 해결하고 내일 일정까지 완벽하게 출력함.
3. **데이터 세탁기(Sanitization) 구현**: 로컬 스토리지 로드 시 필수 필드 누락이나 손상된 날짜 객체(`Invalid Date` 등)를 걸러내는 `_sanitizeInitData`를 추가하여 시스템 런타임 에러를 원천 차단함.
4. **로딩 우선순위 정교화**: URL 파라미터 > 기존 로컬 스토리지 > 기본 샘플 데이터 순으로 로딩 우선순위를 재설계하여, 사용자 데이터가 있을 때 샘플 데이터가 덮어씌워지는 현상을 방지함.
5. **핵심 인터페이스 복구**: 리팩토링 과정에서 실수로 누락되었던 `getBossStatusSummary`, `getAllUpcomingBosses` 등 핵심 API들을 다시 심어 알람 스케줄러와 타 컴포넌트 간의 동기화 에러를 완전히 해결함.
6. **텍스트 모드 파싱 엔진 강화**: 텍스트 모드 입력 시 데이터 기준점을 명확히 하기 위해 '첫 번째 줄 날짜(MM.DD) 필수' 규칙을 도입하고, 시간 범위 및 보스 이름 존재 여부에 대한 엄격한 유효성 검사를 추가하여 데이터 신뢰성을 확보함. (# 구분자를 통한 메모 지원 포함)
